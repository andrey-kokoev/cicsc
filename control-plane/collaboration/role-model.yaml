version: cicsc/role-model-v1

# Role Model for Worktree-Mediated Constructive Collaboration (WMCC)
#
# This model defines the asymmetric authority structure between Main and Worker
# roles. It is normative: control-plane gates validate that agents act only
# within their role authorities.
#
# See also:
# - docs/genesis/worktree-mediated-constructive-collaboration.md (conceptual)
# - control-plane/collaboration/collab-model.yaml (agent instances)
# - AGENTS.md (operational guidance)

roles:
- id: main
  description: |
    Orchestrator of workflow state. Holds dispatch, completion, governance,
    and delegation authorities. Proactive: drives workflow by assigning work,
    accepting completions, and controlling phase transitions.
  authorities:
  - dispatch          # Assign work to agents via collab_dispatch_batch.sh
  - completion        # Ingest and close fulfilled work
  - governance        # Promote phases, triage friction
  - delegation        # Assign worktree ownership
  obligation_profile: null  # Main does not fulfill assignments
  proactive: true

- id: worker
  description: |
    Executor of scoped work. Holds execution authority only. Reactive:
    claims dispatched work, implements on bound branch, fulfills with evidence.
    Cannot self-assign or self-validate.
  authorities:
  - execution         # Implement assigned scope
  obligation_profile: standard  # Must provide evidence bindings on fulfill
  proactive: false

authority_matrix:
- decision: what_gets_worked_on
  decision_ref: execution-ledger.checkbox.selection
  authority: main
  notes: Main selects open checkboxes for dispatch based on priority

- decision: who_does_work
  decision_ref: collab-model.assignment.agent_ref
  authority: main
  notes: Main assigns to specific agents based on capability and load

- decision: when_work_accepted
  decision_ref: collab-model.message.closed
  authority: main
  notes: Main ingests commits and marks checkboxes done after gate validation

- decision: phase_promotion
  decision_ref: execution-ledger.phase.status
  authority: main
  notes: Main advances workflow phases when current phase is complete

- decision: friction_disposition
  decision_ref: collab-model.friction_request.triage
  authority: main
  notes: Main triages worker friction requests (accept_now/accept_later/reject)

- decision: worktree_ownership
  decision_ref: collab-model.worktree_governance.owner
  authority: main
  notes: Main delegates worktree ownership to agents

- decision: how_implemented
  decision_ref: git.commit.content
  authority: worker
  notes: Worker has autonomy within scoped assignment bounds

- decision: evidence_quality
  decision_ref: collab-model.evidence.bindings
  authority: worker
  notes: Worker responsible for attaching required evidence to fulfillments

- decision: claim_order
  decision_ref: collab-model.message.claim
  authority: worker
  notes: Worker decides which actionable message to claim first (WIP ordering)

- decision: friction_request
  decision_ref: collab-model.friction_request.create
  authority: worker
  notes: Worker can raise typed friction requests to Main
