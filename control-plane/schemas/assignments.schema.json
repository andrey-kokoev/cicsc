{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "CICSC Assignments Schema",
  "description": "Schema for assignments.yaml - active assignment tracking",
  "type": "object",
  "required": ["assignments"],
  "properties": {
    "assignments": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/assignment"
      }
    }
  },
  "definitions": {
    "assignment": {
      "type": "object",
      "required": ["checkbox_ref", "agent_ref", "status"],
      "additionalProperties": false,
      "properties": {
        "checkbox_ref": {
          "type": "string",
          "pattern": "^[A-Z]{1,2}[0-9]+\\.[0-9]+$",
          "description": "Reference to checkbox in execution-ledger"
        },
        "agent_ref": {
          "type": "string",
          "pattern": "^AGENT_[A-Z_]+$",
          "description": "Agent identifier (e.g., AGENT_GEMINI)"
        },
        "status": {
          "type": "string",
          "enum": ["open", "in_progress", "done", "deferred"],
          "description": "Assignment status"
        },
        "created_at": {
          "type": "string",
          "format": "date-time",
          "description": "When assignment was created"
        },
        "started_at": {
          "type": "string",
          "format": "date-time",
          "description": "When agent started work"
        },
        "completed_at": {
          "type": "string",
          "format": "date-time",
          "description": "When work was completed"
        },
        "commit": {
          "type": "string",
          "pattern": "^[a-f0-9]{7,40}$",
          "description": "Git commit hash of completion"
        }
      }
    }
  }
}
